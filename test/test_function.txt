FUNCTION USERA : INT

	VAR_INPUT
		A : INT;
	END_VAR

	USERA := A + 3;

END_FUNCTION

FUNCTION USERADD : INT
	VAR_INPUT
		A, B : INT;
	END_VAR

	B := USERA(B);
	USERADD := A + B;
END_FUNCTION

(* FUNCTION FUNC : INT
	VAR_INPUT
		A, B : REAL := 1.56 ;
		C : INT ;
	END_VAR

	VAR
		D, E : INT := 5;
		F : INT ;
	END_VAR



	D := USERADD(D, E) ;
	F := USERADD(A := D, B:= 2);

END_FUNCTION *)


FUNCTION_BLOCK FB

	VAR_INPUT
		X : REAL := -1.01;
		Y : INT ;
	END_VAR

	VAR_IN_OUT
		W : INT;
	END_VAR

	VAR_OUTPUT
		Z : INT ;
	END_VAR

	VAR
		TMP : INT;
	END_VAR

	TMP := X + Y + 1;
	Z := TMP;

END_FUNCTION_BLOCK

PROGRAM MAIN
	VAR_INPUT
		IN : INT ;
	END_VAR

	VAR_OUTPUT
		C : INT ;
	END_VAR


	C := IN + 2;
	C := USERADD(C, 2);
	C := LWORD_TO_TOD(1.0);
	C := SFUN_INTERP_UPDATE(0);

END_PROGRAM



PROGRAM MAIN1
	VAR_INPUT
		IN : INT ;
	END_VAR

	VAR_OUTPUT
		C : INT ;
	END_VAR

	IF IN > 1 THEN
		C := IN + 2;
	ELSE
		C := C + 2;
	END_IF;

END_PROGRAM


CONFIGURATION MAIN_CONFIG

	RESOURCE RES1 ON CPU1
		VAR_GLOBAL
			Z AT %QB0: BYTE :=1;
			X,Y :INT ;
		END_VAR

		TASK fast(INTERVAL := T#10ms, PRIORITY := 4);
		TASK slow(SINGLE := Z, PRIORITY := 2);

		PROGRAM P1 WITH fast: MAIN;
		PROGRAM P2 WITH slow: MAIN1(C => Z, IN := 2);

	END_RESOURCE

END_CONFIGURATION
